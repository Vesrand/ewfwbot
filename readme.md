# Подготовка
1. Подготовка google сервисов
   1. google cloud
      1. Создать проект на https://console.cloud.google.com/
      2. Подготовить аккаунт для бота, с которого он будет получать доступ к документу. Перейти в https://console.cloud.google.com/apis/credentials и создать сервисный аккаунт (create credentials -> service account), затем в настройках аккаунта перейти в keys -> add key -> JSON -> CREATE, создать новый ключ и после генерации сохранить сгенерированный json файл (сохранить можно только один раз после генерации, затем файл станет недоступен и в случае утери нужно будет сгенерировать снова)
      3. Перейти в https://console.cloud.google.com/apis/library найти там Google Sheets API и Google Drive API и включить их.
   2. Выдать права на гугл таблицу созданному сервис-аккаунту, указав в Share сгенерированную почту.
2. Подготовка обработчика бота/сервера
   1. На сервер, на котором будет запущен обработчик бота, установить node.js (если еще не установлен). На момент разработки использовалась версия 20.11.0 https://nodejs.org/en
   2. Любым удобным способом разместить папку с файлами обработчика бота на сервере. Если установлен гит, можно использовать команду git clone https://github.com/Vesrand/ewfwbot.git перейдя предварительно в нужную папку, а затем получать обновления с помощью команды git pull origin master. Либо просто скачать архив с https://github.com/Vesrand/ewfwbot (зеленая кнопка Code -> Download ZIP)
   3. Созданный в пункте 1.i.b файл с ключом переименовать в service_acc.json и положить в папку с обработчиком бота (в корень, рядом с главным файлом ewfwbot.js)
   4. Открыть файл config.json и в поле googleSheetId между кавычек вставить ID гугл таблицы (можно скопировать из адресной строки после https://docs.google.com/spreadsheets/d/ и до следующего слеша)
   5. Для справки: информация по расположению данных на листах таблиц записана в googlesheets_config.json, в случае каких-то изменений следует отредактировать этот файл
3. Подготовка Discord
   1. Регистрация и настройка бота/приложения в Discord (этот пункт выполнять, если нужно зарегистрировать своего бота в discord, в противном случае выполнить только пункт 3.1.2 использовав предоставленный clientId и 3.1.5 использовав ссылку из командной строки при запуске обработчика бота)
      1. Создать приложение (New Application) на https://discord.com/developers/applications
      2. На вкладке General Information скопировать Application ID и записать в файл config.json (находится в папке обработчика бота см п.2) в поле clientId
      3. На вкладке Bot:
         1. Задать username - это то имя бота, которое будет отображаться в discord-сервере
         2. Нажать reset token и сохранить сгенерированный токен в файл config.json в поле token
         3. (на данный момент не требуется, можно пропустить) Включить опции Privileged Gateway Intents: Server Members Intent и Message Content Intent
      4. Сгенерировать ссылку-приглашение на сервер. Для этого на вкладке OAuth2 -> URL Generator отметить пункт bot, затем ниже отметить необходимые права (на данный момент это права из группы TEXT PERMISSIONS) и скопировать сгенерированную ссылку
      5. Пригласить бота на свой сервер. Для этого открыть в браузере ссылку-приглашение и выбрать сервер, на который нужно пригласить бота.
   2. Регистрация слеш-команд на сервере
      1. Сохранить ID сервера в config.json в поле guildId. Для этого нажать ПКМ на названии сервера и выбрать Copy Server ID. Если такого пункта нет, то предварительно включить опцию в настройках discord: User Settings -> Advanced -> Developer Mode.
      2. В командной строке находясь в папке с обработчиком бота запустить команду: node deploy-commands.js (для удаления команд бота можно использовать node delete-commands.js, удалить конкретную команду: node delete-commands.js "название команды", при изменениях в составе команд рекомендуется удалять и заново добавлять все команды)
4. Использование бота
   1. Запустить обработчик бота на сервере. В командной строке находясь в папке с обработчиком бота запустить команду: node ewfwbot.js
   2. Бот должен после запуска обработчика выйти онлайн на discord-сервере. Описание команд см ниже

# Описание команд
## Основные
### undo
Отменяет изменения, внесенные последней командой. История изменений не сохраняется между перезапусками обработчика бота. Не все команды имеют режим отката изменений.
*Доступна:* 

### setdrakerate
Установить новый курс дрейка.
*Доступна:* 
|Параметр|Тип|Описание|Обязательный|Опции|
|:------:|:-:|:------:|:----------:|:---:|
|new_rate|число|Новое значение курса дрейка|Да|Нет|

*Пример:* /setdrakerate 1000

## Роли
### setroleforuser
Привязать дискорд-пользователя к роли для бота.
*Доступна:* 
*Параметры:*
|Параметр|Тип|Описание|Обязательный|Опции|
|:------:|:-:|:------:|:----------:|:---:|
|role|список|Роль для бота|Да|- РП-мастер  - Арбитр \ - Глава Фракции|
|user|пользователь|Пользователь|Да|Нет|
|fraction|список|Фракция (для роли главы фракции)|Нет| - Телванни
- Редоран
- Хлаалу
- Храм
- Шестой Дом|

*Пример:* /setroleforuser Глава Фракции @Vesrand Телванни

## Боевые



|Параметр|Тип|Описание|Обязательный|
|:------:|:-:|:------:|:----------:|
|||||